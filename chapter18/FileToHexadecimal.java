/**
 * @title chapter18 / List 18-8 / FileToHexadecimal
 * @content File to Hexadecimal(16進数)
 * @author Oshika
 * @date 2020-09-08 / 1430-1530
 */
package chapter18;

import java.io.BufferedInputStream;
import java.io.DataInputStream;
import java.io.EOFException;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;

public class FileToHexadecimal {

    public static void main(String[] args) {
        DataInputStream in = null;

        if(args.length != 1) {
            System.out.println("使用法: java FileToHexadecimal 読み込みファイル名");
            System.out.println("例: java FileToHexadecimal iroha.txt");
            System.exit(0);
        }//if

        try {
            in = new DataInputStream(
                new BufferedInputStream(
                new FileInputStream(args[0])));

            int offset = 0;
            while(true) {
                byte b = in.readByte();

                if (offset % 16 == 0) {
                    System.out.print(intToHexString(offset) + ": ");
                } else if (offset % 8 == 0){
                    System.out.print("-");
                } else {
                    System.out.print(" ");
                }

                System.out.print(byteToHexString(b));
                if (offset % 16 == 15) {
                    System.out.println();
                }

                offset++;
            }//while loop
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (EOFException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                if(in != null) {
                    in.close();
                }
            } catch (IOException e) {
                e.printStackTrace();
            }
        }//try-catch-finally

    }//main()


    public static String intToHexString(int n) {
        return byteToHexString((byte)(n >>> 24)) +
                byteToHexString((byte)(n >>> 16)) +
                byteToHexString((byte)(n >>> 8)) +
                byteToHexString((byte) n );
    }//intToHexString()


    private static String byteToHexString(byte b) {
        int n = (int) b;

        if (n < 0) {
            n =256 + n;
        }

        if (n < 16) {
            return "0" + Integer.toHexString(n).toUpperCase();
        } else {
            return Integer.toHexString(n).toUpperCase();
        }

    }//byteToHexString()

}//class

/*
◆javaの byte-codeは「CA FE BA BE」で始まるんだと

C:\Users\sophia\Desktop\chapter18_forCommandPrompt>javac FileToHexadecimal.java

C:\Users\sophia\Desktop\chapter18_forCommandPrompt>java FileToHexadecimal FileToHexadecimal.class
00000000: CA FE BA BE 00 00 00 34-00 74 0A 00 24 00 38 09
00000010: 00 39 00 3A 08 00 3B 0A-00 3C 00 3D 08 00 3E 0A
00000020: 00 39 00 3F 07 00 40 07-00 41 07 00 42 0A 00 09
00000030: 00 43 0A 00 08 00 44 0A-00 07 00 44 0A 00 07 00
00000040: 45 07 00 46 0A 00 0E 00-38 0A 00 23 00 47 0A 00
00000050: 0E 00 48 08 00 49 0A 00-0E 00 4A 0A 00 3C 00 4B
00000060: 08 00 4C 08 00 4D 0A 00-23 00 4E 0A 00 3C 00 4F
00000070: 07 00 50 0A 00 19 00 51-0A 00 07 00 52 07 00 53
00000080: 0A 00 1C 00 51 07 00 54-0A 00 1E 00 51 08 00 55
00000090: 0A 00 56 00 57 0A 00 58-00 59 07 00 5A 07 00 5B
000000A0: 01 00 06 3C 69 6E 69 74-3E 01 00 03 28 29 56 01
000000B0: 00 04 43 6F 64 65 01 00-0F 4C 69 6E 65 4E 75 6D
000000C0: 62 65 72 54 61 62 6C 65-01 00 04 6D 61 69 6E 01
000000D0: 00 16 28 5B 4C 6A 61 76-61 2F 6C 61 6E 67 2F 53
000000E0: 74 72 69 6E 67 3B 29 56-01 00 0D 53 74 61 63 6B
000000F0: 4D 61 70 54 61 62 6C 65-07 00 40 07 00 5C 07 00
00000100: 50 07 00 53 07 00 54 07-00 5D 01 00 0E 69 6E 74
00000110: 54 6F 48 65 78 53 74 72-69 6E 67 01 00 15 28 49
00000120: 29 4C 6A 61 76 61 2F 6C-61 6E 67 2F 53 74 72 69
00000130: 6E 67 3B 01 00 0F 62 79-74 65 54 6F 48 65 78 53
00000140: 74 72 69 6E 67 01 00 15-28 42 29 4C 6A 61 76 61
00000150: 2F 6C 61 6E 67 2F 53 74-72 69 6E 67 3B 01 00 0A
00000160: 53 6F 75 72 63 65 46 69-6C 65 01 00 16 46 69 6C
00000170: 65 54 6F 48 65 78 61 64-65 63 69 6D 61 6C 2E 6A
00000180: 61 76 61 0C 00 25 00 26-07 00 5E 0C 00 5F 00 60
00000190: 01 00 3D E4 BD BF E7 94-A8 E6 B3 95 3A 20 6A 61
000001A0: 76 61 20 46 69 6C 65 54-6F 48 65 78 61 64 65 63
000001B0: 69 6D 61 6C 20 E8 AA AD-E3 81 BF E8 BE BC E3 81
000001C0: BF E3 83 95 E3 82 A1 E3-82 A4 E3 83 AB E5 90 8D
000001D0: 07 00 61 0C 00 62 00 63-01 00 25 E4 BE 8B 3A 20
000001E0: 6A 61 76 61 20 46 69 6C-65 54 6F 48 65 78 61 64
000001F0: 65 63 69 6D 61 6C 20 69-72 6F 68 61 2E 74 78 74
00000200: 0C 00 64 00 65 01 00 17-6A 61 76 61 2F 69 6F 2F
00000210: 44 61 74 61 49 6E 70 75-74 53 74 72 65 61 6D 01
00000220: 00 1B 6A 61 76 61 2F 69-6F 2F 42 75 66 66 65 72
00000230: 65 64 49 6E 70 75 74 53-74 72 65 61 6D 01 00 17
00000240: 6A 61 76 61 2F 69 6F 2F-46 69 6C 65 49 6E 70 75
00000250: 74 53 74 72 65 61 6D 0C-00 25 00 63 0C 00 25 00
00000260: 66 0C 00 67 00 68 01 00-17 6A 61 76 61 2F 6C 61
00000270: 6E 67 2F 53 74 72 69 6E-67 42 75 69 6C 64 65 72
00000280: 0C 00 32 00 33 0C 00 69-00 6A 01 00 02 3A 20 0C
00000290: 00 6B 00 6C 0C 00 6D 00-63 01 00 01 2D 01 00 01
000002A0: 20 0C 00 34 00 35 0C 00-62 00 26 01 00 1D 6A 61
000002B0: 76 61 2F 69 6F 2F 46 69-6C 65 4E 6F 74 46 6F 75
000002C0: 6E 64 45 78 63 65 70 74-69 6F 6E 0C 00 6E 00 26
000002D0: 0C 00 6F 00 26 01 00 13-6A 61 76 61 2F 69 6F 2F
000002E0: 49 4F 45 78 63 65 70 74-69 6F 6E 01 00 14 6A 61
000002F0: 76 61 2F 69 6F 2F 45 4F-46 45 78 63 65 70 74 69
00000300: 6F 6E 01 00 01 30 07 00-70 0C 00 71 00 33 07 00
00000310: 72 0C 00 73 00 6C 01 00-11 46 69 6C 65 54 6F 48
00000320: 65 78 61 64 65 63 69 6D-61 6C 01 00 10 6A 61 76
00000330: 61 2F 6C 61 6E 67 2F 4F-62 6A 65 63 74 01 00 13
00000340: 5B 4C 6A 61 76 61 2F 6C-61 6E 67 2F 53 74 72 69
00000350: 6E 67 3B 01 00 13 6A 61-76 61 2F 6C 61 6E 67 2F
00000360: 54 68 72 6F 77 61 62 6C-65 01 00 10 6A 61 76 61
00000370: 2F 6C 61 6E 67 2F 53 79-73 74 65 6D 01 00 03 6F
00000380: 75 74 01 00 15 4C 6A 61-76 61 2F 69 6F 2F 50 72
00000390: 69 6E 74 53 74 72 65 61-6D 3B 01 00 13 6A 61 76
000003A0: 61 2F 69 6F 2F 50 72 69-6E 74 53 74 72 65 61 6D
000003B0: 01 00 07 70 72 69 6E 74-6C 6E 01 00 15 28 4C 6A
000003C0: 61 76 61 2F 6C 61 6E 67-2F 53 74 72 69 6E 67 3B
000003D0: 29 56 01 00 04 65 78 69-74 01 00 04 28 49 29 56
000003E0: 01 00 18 28 4C 6A 61 76-61 2F 69 6F 2F 49 6E 70
000003F0: 75 74 53 74 72 65 61 6D-3B 29 56 01 00 08 72 65
00000400: 61 64 42 79 74 65 01 00-03 28 29 42 01 00 06 61
00000410: 70 70 65 6E 64 01 00 2D-28 4C 6A 61 76 61 2F 6C
00000420: 61 6E 67 2F 53 74 72 69-6E 67 3B 29 4C 6A 61 76
00000430: 61 2F 6C 61 6E 67 2F 53-74 72 69 6E 67 42 75 69
00000440: 6C 64 65 72 3B 01 00 08-74 6F 53 74 72 69 6E 67
00000450: 01 00 14 28 29 4C 6A 61-76 61 2F 6C 61 6E 67 2F
00000460: 53 74 72 69 6E 67 3B 01-00 05 70 72 69 6E 74 01
00000470: 00 0F 70 72 69 6E 74 53-74 61 63 6B 54 72 61 63
00000480: 65 01 00 05 63 6C 6F 73-65 01 00 11 6A 61 76 61
00000490: 2F 6C 61 6E 67 2F 49 6E-74 65 67 65 72 01 00 0B
000004A0: 74 6F 48 65 78 53 74 72-69 6E 67 01 00 10 6A 61
000004B0: 76 61 2F 6C 61 6E 67 2F-53 74 72 69 6E 67 01 00
000004C0: 0B 74 6F 55 70 70 65 72-43 61 73 65 00 21 00 23
000004D0: 00 24 00 00 00 00 00 04-00 01 00 25 00 26 00 01
000004E0: 00 27 00 00 00 1D 00 01-00 01 00 00 00 05 2A B7
000004F0: 00 01 B1 00 00 00 01 00-28 00 00 00 06 00 01 00
00000500: 00 00 10 00 09 00 29 00-2A 00 01 00 27 00 00 02
00000510: 83 00 08 00 06 00 00 00-FB 01 4C 2A BE 04 9F 00
00000520: 17 B2 00 02 12 03 B6 00-04 B2 00 02 12 05 B6 00
00000530: 04 03 B8 00 06 BB 00 07-59 BB 00 08 59 BB 00 09
00000540: 59 2A 03 32 B7 00 0A B7-00 0B B7 00 0C 4C 03 3D
00000550: 2B B6 00 0D 3E 1C 10 10-70 9A 00 22 B2 00 02 BB
00000560: 00 0E 59 B7 00 0F 1C B8-00 10 B6 00 11 12 12 B6
00000570: 00 11 B6 00 13 B6 00 14-A7 00 1D 1C 10 08 70 9A
00000580: 00 0E B2 00 02 12 15 B6-00 14 A7 00 0B B2 00 02
00000590: 12 16 B6 00 14 B2 00 02-1D B8 00 17 B6 00 14 1C
000005A0: 10 10 70 10 0F A0 00 09-B2 00 02 B6 00 18 84 02
000005B0: 01 A7 FF 9F 4D 2C B6 00-1A 2B C6 00 07 2B B6 00
000005C0: 1B A7 00 52 4D 2C B6 00-1D A7 00 4A 4D 2C B6 00
000005D0: 1F 2B C6 00 07 2B B6 00-1B A7 00 3A 4D 2C B6 00
000005E0: 1D A7 00 32 4D 2C B6 00-1D 2B C6 00 07 2B B6 00
000005F0: 1B A7 00 22 4D 2C B6 00-1D A7 00 1A 3A 04 2B C6
00000600: 00 07 2B B6 00 1B A7 00-0A 3A 05 19 05 B6 00 1D
00000610: 19 04 BF B1 00 0B 00 1C-00 9B 00 9B 00 19 00 A0
00000620: 00 A8 00 AB 00 1C 00 1C-00 9B 00 B3 00 1E 00 B8
00000630: 00 C0 00 C3 00 1C 00 1C-00 9B 00 CB 00 1C 00 D0
00000640: 00 D8 00 DB 00 1C 00 1C-00 A0 00 E3 00 00 00 B3
00000650: 00 B8 00 E3 00 00 00 CB-00 D0 00 E3 00 00 00 E5
00000660: 00 ED 00 F0 00 1C 00 E3-00 E5 00 E3 00 00 00 02
00000670: 00 28 00 00 00 CA 00 32-00 00 00 13 00 02 00 15
00000680: 00 08 00 16 00 10 00 17-00 18 00 18 00 1C 00 1C
00000690: 00 35 00 20 00 37 00 22-00 3C 00 24 00 43 00 25
000006A0: 00 62 00 26 00 69 00 27-00 74 00 29 00 7C 00 2C
000006B0: 00 86 00 2D 00 8F 00 2E-00 95 00 31 00 98 00 32
000006C0: 00 9B 00 33 00 9C 00 34-00 A0 00 3B 00 A4 00 3C
000006D0: 00 A8 00 40 00 AB 00 3E-00 AC 00 3F 00 B0 00 41
000006E0: 00 B3 00 35 00 B4 00 36-00 B8 00 3B 00 BC 00 3C
000006F0: 00 C0 00 40 00 C3 00 3E-00 C4 00 3F 00 C8 00 41
00000700: 00 CB 00 37 00 CC 00 38-00 D0 00 3B 00 D4 00 3C
00000710: 00 D8 00 40 00 DB 00 3E-00 DC 00 3F 00 E0 00 41
00000720: 00 E3 00 3A 00 E5 00 3B-00 E9 00 3C 00 ED 00 40
00000730: 00 F0 00 3E 00 F2 00 3F-00 F7 00 41 00 FA 00 43
00000740: 00 2B 00 00 00 4E 00 14-FC 00 1C 07 00 2C FC 00
00000750: 1A 01 FC 00 2A 01 11 07-18 FF 00 05 00 02 07 00
00000760: 2D 07 00 2C 00 01 07 00-2E 0C 42 07 00 2F 47 07
00000770: 00 30 0C 42 07 00 2F 47-07 00 2F 0C 42 07 00 2F
00000780: 47 07 00 31 FE 00 09 00-00 07 00 31 42 07 00 2F
00000790: 06 F8 00 02 00 09 00 32-00 33 00 01 00 27 00 00
000007A0: 00 5C 00 03 00 01 00 00-00 34 BB 00 0E 59 B7 00
000007B0: 0F 1A 10 18 7C 91 B8 00-17 B6 00 11 1A 10 10 7C
000007C0: 91 B8 00 17 B6 00 11 1A-10 08 7C 91 B8 00 17 B6
000007D0: 00 11 1A 91 B8 00 17 B6-00 11 B6 00 13 B0 00 00
000007E0: 00 01 00 28 00 00 00 16-00 05 00 00 00 47 00 17
000007F0: 00 48 00 22 00 49 00 2A-00 4A 00 33 00 47 00 0A
00000800: 00 34 00 35 00 01 00 27-00 00 00 6D 00 02 00 02
00000810: 00 00 00 34 1A 3C 1B 9C-00 09 11 01 00 1B 60 3C
00000820: 1B 10 10 A2 00 1D BB 00-0E 59 B7 00 0F 12 20 B6
00000830: 00 11 1B B8 00 21 B6 00-22 B6 00 11 B6 00 13 B0
00000840: 1B B8 00 21 B6 00 22 B0-00 00 00 02 00 28 00 00
00000850: 00 1A 00 06 00 00 00 4F-00 02 00 51 00 06 00 52
00000860: 00 0C 00 55 00 12 00 56-00 2C 00 58 00 2B 00 00
00000870: 00 07 00 02 FC 00 0C 01-1F 00 01 00 36 00 00 00
00000880: 02 00 37java.io.EOFException
        at java.io.DataInputStream.readByte(Unknown Source)
        at FileToHexadecimal.main(FileToHexadecimal.java:34)

*/